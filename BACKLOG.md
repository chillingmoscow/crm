# –ë—ç–∫–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞ CRM

> –î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

---

## ‚úÖ –°–¥–µ–ª–∞–Ω–æ

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Next.js 15 (App Router) + TypeScript + pnpm
- Tailwind CSS + shadcn/ui (button, card, input, label, select, separator, switch, checkbox, badge, sidebar, sheet)
- Supabase: –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Supabase CLI + Docker
- Supabase: production –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (`supabase.sheerly.app`)
- Production –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Coolify + GitHub webhook (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ `main`)
- DNS/SSL –¥–ª—è `sheerly.app` –∏ `supabase.sheerly.app`
- `@supabase/ssr` v0.6.x + `@supabase/supabase-js` v2
- Middleware: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤, –æ–±—Ö–æ–¥ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º —Ç–æ–∫–µ–Ω–µ
- TypeScript —Ç–∏–ø—ã –ë–î –≤ `src/types/database.ts`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–º–∏–≥—Ä–∞—Ü–∏–∏ 001‚Äì023)

| –§–∞–π–ª | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|---|---|
| `001` | accounts, venues, profiles, roles, permissions, role_permissions, user_venue_roles, invitations |
| `002` | –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–æ–ª–∏: owner, manager, admin, staff, waiter, hostess + –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ |
| `003` | RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü |
| `004` | –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏; —Ñ—É–Ω–∫—Ü–∏–∏ `get_active_venue_id`, `has_permission` |
| `005` | Storage buckets: avatars, venue-logos, account-logos |
| `006` | RLS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏; `get_active_account_id()` |
| `007` | –ü–æ–ª–∏—Ç–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–≤–µ–¥–µ–Ω–∏–π |
| `008` | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫—É—Ä—Å–∏–∏ RLS —á–µ—Ä–µ–∑ security definer |
| `009` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏: `get_venue_staff()`, `get_user_venues()`, `accept_invitation()` |
| `010` | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫ venues/invitations |
| `011` | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: phone, telegram_id, gender, birth_date, address, employment_date, avatar_url, medical_book_number/date, passport_photos; –±–∞–∫–µ—Ç staff-documents |
| `012` | –ú—è–≥–∫–æ–µ —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ: `status`/`fired_at` –≤ user_venue_roles; `get_fired_staff()` |
| `013` | –¢–∞–±–ª–∏—Ü–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å RLS; —Ç—Ä–∏–≥–≥–µ—Ä auto-fill employment_date; —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `get_venue_staff` (phone, telegram, gender, birth_date) |
| `014` | –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Ñ–∏–ª—è–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è |
| `015` | –î–µ–º–æ-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ª–æ–≤ |
| `016` | –£—Å–∏–ª–µ–Ω–∏–µ security/RLS –¥–ª—è staff-–æ–ø–µ—Ä–∞—Ü–∏–π |
| `017` | –ü—Ä–∞–≤–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–æ–ª–µ–π –≤ –º–∞—Ç—Ä–∏—Ü–µ role_permissions |
| `018` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Å—É—â–Ω–æ—Å—Ç—è—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª–∞/–∑–∞–≤–µ–¥–µ–Ω–∏–π |
| `019` | Production-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –∑–∞–ª–æ–≤ |
| `020` | Hardening –∞–∫—Ç–∏–≤–Ω–æ–≥–æ membership (`active_venue_id`, `has_permission`, `get_active_account_id`) |
| `021` | –£–∂–µ—Å—Ç–æ—á–µ–Ω–∏–µ `public` grants |
| `022` | Account-scoped –ø—Ä–∞–≤–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–æ–ª–µ–π |
| `023` | Backward compatibility –¥–ª—è –º–∞—Ç—Ä–∏—Ü—ã role permissions |
| `028` | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `get_user_venues()` (UNION + `status = 'active'`) + `complete_owner_onboarding()` —è–≤–Ω—ã–π `status = 'active'` |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `{}` –≤ error banner –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`setGlobalError(error.message)` –≤–º–µ—Å—Ç–æ –æ–±—ä–µ–∫—Ç–∞)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω overlap –∏–∫–æ–Ω–∫–∏ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (Bitwarden –∏ –¥—Ä.) ‚Äî `z-10` –Ω–∞ –∏–∫–æ–Ω–∫—É + `ring-2 ring-blue-100` –Ω–∞ —Ñ–æ–∫—É—Å (login + register)
- –£–±—Ä–∞–Ω `router.refresh()` –ø–æ—Å–ª–µ `router.push()` –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∑–∞–º–µ—Ç–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
- Email/–ø–∞—Ä–æ–ª—å, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- OAuth callback + –ø—Ä–∏—ë–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π (`/invite`)
- –ü–æ–ª–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω –≤—Å–µ—Ö auth-—Å—Ç—Ä–∞–Ω–∏—Ü –≤ —Å—Ç–∏–ª–µ Sheerly:
  - `/login` ‚Äî –¥–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout (PromoPanel + —Ñ–æ—Ä–º–∞), FloatingField —Å –ø–ª–∞–≤–∞—é—â–∏–º –ª–µ–π–±–ª–æ–º
  - `/register` ‚Äî —Ç–æ—Ç –∂–µ layout, –ø–æ–ª—è: –∏–º—è, email, –ø–∞—Ä–æ–ª—å, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
  - `/forgot-password` ‚Äî –¥–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout, —Ñ–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å–±—Ä–æ—Å–∞
  - `/reset-password` ‚Äî —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π layout, –ø–æ–ª—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è —Å eye-toggle
  - `/verify-email` ‚Äî —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π layout —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
  - `/auth/email-confirmed` ‚Äî —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π layout —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∏–ø–æ–≤—ã—Ö –æ—à–∏–±–æ–∫ –≤—Ö–æ–¥–∞ (–≤ —Ç.—á. "–ü–æ—á—Ç–∞ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞")
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã redirect/callback —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–±–µ–∑ `localhost`/SSL –æ—à–∏–±–æ–∫ –≤ production)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç padding —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (Bitwarden –∏ –¥—Ä.): —É—Å–ª–æ–≤–Ω—ã–π `pr-4`/`pr-10` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è `rightSlot`

### Email-—à–∞–±–ª–æ–Ω—ã

- `src/lib/invitations/mailer.ts` ‚Äî –ø–æ–ª–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω `buildInvitationHtml()`: –ª–æ–≥–æ—Ç–∏–ø Sheerly (—Å–∏–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç "S" + wordmark), –∏–∫–æ–Ω–∫–∞ üëã, –±–ª–æ–∫ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è/—Ä–æ–ª–∏/–ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ, —Å–∏–Ω—è—è CTA-–∫–Ω–æ–ø–∫–∞, fallback-—Å—Å—ã–ª–∫–∞, footer
- `public/email-templates/confirm-signup.html` ‚Äî —à–∞–±–ª–æ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email –≤ —Å—Ç–∏–ª–µ Sheerly –¥–ª—è GoTrue (`{{ .ConfirmationURL }}`)
- `public/email-templates/reset-password.html` ‚Äî —à–∞–±–ª–æ–Ω —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è + amber-–±–ª–æ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Coolify: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `GOTRUE_MAILER_TEMPLATES_CONFIRMATION`, `GOTRUE_MAILER_TEMPLATES_RECOVERY` ‚Üí URL —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ `public/email-templates/`

### –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (`/onboarding`)
Wizard –∏–∑ 4 —à–∞–≥–æ–≤: –∞–∫–∫–∞—É–Ω—Ç ‚Üí –∑–∞–≤–µ–¥–µ–Ω–∏–µ ‚Üí –ø–µ—Ä—Å–æ–Ω–∞–ª ‚Üí –≥–æ—Ç–æ–≤–æ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –ø–æ–ª–µ–π –≤ `step-profile` ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç login/register (`ring-2` –Ω–∞ focus/error)
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –ª–µ–π–±–ª "ID Telegram" ‚Üí "Telegram ID"; —Ç—É–ª—Ç–∏–ø –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ JS-—Ç–∞–π–º–µ—Ä, —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å
- Wizard —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —à–∞–≥–∞ 1 (`savedProfile` state) –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —Å —à–∞–≥–∞ 2
- `step-profile` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `uploadAvatar` (–±–∞–∫–µ—Ç `avatars/`) –≤–º–µ—Å—Ç–æ `uploadLogo` ‚Äî –∞–≤–∞—Ç–∞—Ä—ã –∏ –ª–æ–≥–æ—Ç–∏–ø—ã –≤ —Ä–∞–∑–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ email: —Å—Å—ã–ª–∫–∞ –≤–µ–¥—ë—Ç –Ω–∞ –¥–æ–º–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`/auth/confirm?token_hash=...`), –∞ –Ω–µ –Ω–∞ Supabase
- –î–æ–±–∞–≤–ª–µ–Ω—ã `/auth/confirm` route handler –∏ `/set-password` —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è invited-users flow
- –ú–∏–≥—Ä–∞—Ü–∏—è `028`: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω `get_user_venues()` (UNION + `status = 'active'`), venue switcher –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞; `complete_owner_onboarding()` —è–≤–Ω–æ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç `status = 'active'`

### UI Shell
- Collapsible sidebar (shadcn Sidebar): —Å—Ö–ª–æ–ø—ã–≤–∞–µ—Ç—Å—è –≤ –∏–∫–æ–Ω–∫–∏ –Ω–∞ desktop, drawer –Ω–∞ mobile
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é –ø–æ —Ä–æ–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è (owner –≤–∏–¥–∏—Ç –≤—Å—ë, waiter ‚Äî –Ω–∏—á–µ–≥–æ)
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∑–∞–≤–µ–¥–µ–Ω–∏–π (VenueSwitcher) —Å –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ –∫–ª–∏–∫—É —Å–Ω–∞—Ä—É–∂–∏
- Notification bell –≤ —à–∞–ø–∫–µ: –ø–∞–Ω–µ–ª—å —Å —Ñ–∏–ª—å—Ç—Ä–æ–º "–í—Å–µ / –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ", mark-as-read, mark-all-read

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –î–æ–ª–∂–Ω–æ—Å—Ç–∏ (`/settings/roles`)
- –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π (—Å–∏—Å—Ç–µ–º–Ω—ã–µ + –∫–∞—Å—Ç–æ–º–Ω—ã–µ)
- –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ —Å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ó–∞–≤–µ–¥–µ–Ω–∏—è (`/settings/venues`)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π –∞–∫–∫–∞—É–Ω—Ç–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–æ—Ñ–∏–ª—å (`/settings/profile`)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (`/staff`)
- –¢–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ + –æ–∂–∏–¥–∞—é—â–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Ç–æ–ª–±—Ü–æ–≤ (–∏–∫–æ–Ω–∫–∞): –§–æ—Ç–æ, Email, –¢–µ–ª–µ—Ñ–æ–Ω, Telegram, –ü–æ–ª, –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –î–æ–ª–∂–Ω–æ—Å—Ç—å, –¢—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/email (—Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –ª—É–ø—É)
- –§–∏–ª—å—Ç—Ä—ã: –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏, –ø–æ –ø–æ–ª—É
- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (Sheet): –∫–æ–Ω—Ç–∞–∫—Ç—ã, –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –¥–æ–∫—É–º–µ–Ω—Ç—ã (–ø–∞—Å–ø–æ—Ä—Ç, –º–µ–¥–∫–Ω–∏–∂–∫–∞), –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
- –î–∞—Ç–∞ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
- –ú—è–≥–∫–æ–µ —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ: —Å—Ç–∞—Ç—É—Å "—É–≤–æ–ª–µ–Ω", —Ä–∞–∑–¥–µ–ª "–£–≤–æ–ª–µ–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏" —Å –∫–Ω–æ–ø–∫–æ–π "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ email —Å –≤—ã–±–æ—Ä–æ–º –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
- –ò–Ω–≤–∞–π—Ç—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–±–µ–∑ –æ—à–∏–±–∫–∏ `already been registered`)
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ pending-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑ —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ invitation –ø–∏—Å—å–º–∞ —á–µ—Ä–µ–∑ Resend API (—Å fallback –Ω–∞ —à–∞–±–ª–æ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞ Supabase)
- –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –º—É–ª—å—Ç–∏-—Ç–µ–Ω–∞–Ω—Ç–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è `pending` –∏–Ω–≤–∞–π—Ç–æ–≤ –ø—Ä–∏ –≤—Ö–æ–¥–µ
- –†–æ–ª–µ–≤–æ–π –¥–æ—Å—Ç—É–ø: owner/manager/admin –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä

---

## üîú –ë–ª–∏–∂–∞–π—à–µ–µ

- [ ] **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ–∑–¥–∞–Ω–∏—è: –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è, —É–≤–æ–ª—å–Ω–µ–Ω–∏–∏, –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –º–µ–¥–∫–Ω–∏–∂–∫–∏
- [ ] **Real-time** –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö (Supabase Realtime)
- [ ] **–ü–æ–∏—Å–∫ –ø–æ –ø–∞—Å–ø–æ—Ä—Ç—É/–º–µ–¥–∫–Ω–∏–∂–∫–µ** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

---

## üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

### –ü–µ—Ä—Å–æ–Ω–∞–ª
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (CSV / Excel)
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (mass fire, mass role change)

### –ó–∞–≤–µ–¥–µ–Ω–∏—è
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞/—Å–º–µ–Ω–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å–∞–º–∏ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ UI

### –ê–∫–∫–∞—É–Ω—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ª–æ–≥–æ—Ç–∏–ø)
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π / —Ç–∞—Ä–∏—Ñ–æ–º

### –û–±—â–µ–µ
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è)
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (RU / EN)

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

| –†–µ—à–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|---|---|
| `pnpm` –≤–º–µ—Å—Ç–æ `npm` | –ë—ã—Å—Ç—Ä–µ–µ, —ç–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ —á–µ—Ä–µ–∑ hardlinks |
| Turbopack (`--turbopack`) | ~10x –±—ã—Å—Ç—Ä–µ–µ HMR –≤ dev-—Ä–µ–∂–∏–º–µ |
| Supabase local (`supabase start`) | –ü–æ–ª–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–∫ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ |
| RLS –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–¥–∞ |
| Server Actions | –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ API-—Å–ª–æ—è, –¥–∞–Ω–Ω—ã–µ –ø—Ä—è–º–æ –≤ Server Components |
| Soft-delete (status fired) | –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è, –∏—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è |
| `as unknown as Record<string, unknown>` | –û–±—Ö–æ–¥ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö Supabase TS-—Ç–∏–ø–æ–≤ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö –∏–∑ –º–∏–≥—Ä–∞—Ü–∏–π |
| –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π grid-template | –í–∏–¥–∏–º–æ—Å—Ç—å —Å—Ç–æ–ª–±—Ü–æ–≤ –±–µ–∑ —Å–¥–≤–∏–≥–æ–≤ —á–µ—Ä–µ–∑ `style={{ gridTemplateColumns }}` |
| FloatingField ‚Äî —É—Å–ª–æ–≤–Ω—ã–π `pr-4`/`pr-10` | Email-–ø–æ–ª—è –±–µ–∑ rightSlot –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –ª–∏—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø, –∏–∫–æ–Ω–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç —Ç–µ–∫—Å—Ç |
| Email-—à–∞–±–ª–æ–Ω—ã –≤ `public/email-templates/` | –§–∞–π–ª—ã –æ—Ç–¥–∞—é—Ç—Å—è Next.js —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏; GoTrue –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–æ URL —á–µ—Ä–µ–∑ `GOTRUE_MAILER_TEMPLATES_*` |
