# –ë—ç–∫–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞ CRM

> –î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

---

## ‚úÖ –°–¥–µ–ª–∞–Ω–æ

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Next.js 15 (App Router) + TypeScript + pnpm
- Tailwind CSS + shadcn/ui (button, card, input, label, select, separator, switch, checkbox, badge)
- Supabase: –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Supabase CLI + Docker
- `@supabase/ssr` v0.8.0 + `@supabase/supabase-js` v2.97
- Middleware –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- TypeScript —Ç–∏–ø—ã –ë–î –≤ `src/types/database.ts`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–º–∏–≥—Ä–∞—Ü–∏–∏)
| –§–∞–π–ª | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|---|---|
| `001_initial_schema.sql` | –¢–∞–±–ª–∏—Ü—ã: accounts, venues, profiles, roles, permissions, role_permissions, user_venue_roles, invitations |
| `002_seed_roles_permissions.sql` | –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–æ–ª–∏ (owner, manager, staff) –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ |
| `003_rls_policies.sql` | Row Level Security –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü |
| `004_triggers.sql` | –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| `005_storage_buckets.sql` | –ë–∞–∫–µ—Ç—ã –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–æ–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –∑–∞–≤–µ–¥–µ–Ω–∏–π |
| `006_roles_management_rls.sql` | RLS –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–æ–ª–µ–π, —Ñ—É–Ω–∫—Ü–∏—è `get_active_account_id()` |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`src/app/(auth)/`)
- –í—Ö–æ–¥ –ø–æ email/–ø–∞—Ä–æ–ª—å (`/login`)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (`/register`)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (`/forgot-password`, `/reset-password`)
- OAuth callback (`/auth/callback`)

### –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (`src/app/(onboarding)/onboarding/`)
Wizard –∏–∑ 4 —à–∞–≥–æ–≤:
1. **–ê–∫–∫–∞—É–Ω—Ç** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –∑–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞
2. **–ó–∞–≤–µ–¥–µ–Ω–∏–µ** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, –∞–¥—Ä–µ—Å, —Ç–µ–ª–µ—Ñ–æ–Ω, –≤–∞–ª—é—Ç–∞, —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å, —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª** ‚Äî –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ email
4. **–ì–æ—Ç–æ–≤–æ** ‚Äî —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ö–æ–¥ –≤ dashboard

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –î–æ–ª–∂–Ω–æ—Å—Ç–∏ (`/settings/roles`)
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–æ–ª–µ–π (—Å–∏—Å—Ç–µ–º–Ω—ã–µ + –∫–∞—Å—Ç–æ–º–Ω—ã–µ)
- –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å–∞)

---

## üîú –í —Ä–∞–±–æ—Ç–µ / –ë–ª–∏–∂–∞–π—à–µ–µ

- [ ] **UI Shell ‚Äî –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é** (burger, collapsible sidebar)
  - –°–µ–∫—Ü–∏–∏: –ü–µ—Ä—Å–æ–Ω–∞–ª ‚Üí –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏; –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ó–∞–≤–µ–¥–µ–Ω–∏—è, –î–æ–ª–∂–Ω–æ—Å—Ç–∏
  - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –≤ footer —Å–∞–π–¥–±–∞—Ä–∞
- [ ] **–ó–∞–≤–µ–¥–µ–Ω–∏—è** (`/settings/venues`) ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** (`/staff`) ‚Äî —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏

---

## üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

### –ü–µ—Ä—Å–æ–Ω–∞–ª
- [ ] –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—é –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: –ø—Ä–æ—Ñ–∏–ª—å, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, –∏—Å—Ç–æ—Ä–∏—è
- [ ] –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞, –æ—Ç–∑—ã–≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [ ] –°–º–µ–Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### –ó–∞–≤–µ–¥–µ–Ω–∏—è
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–∞–≤–µ–¥–µ–Ω–∏—è (—á–∞—Å—ã, –∫–æ–Ω—Ç–∞–∫—Ç—ã, —Ç–∏–ø)
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞/—Å–º–µ–Ω–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è (–¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏)

### –ê–∫–∫–∞—É–Ω—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ª–æ–≥–æ—Ç–∏–ø)
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π / —Ç–∞—Ä–∏—Ñ–æ–º

### –û–±—â–µ–µ
- [ ] –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è, —Ñ–æ—Ç–æ, —Ç–µ–ª–µ—Ñ–æ–Ω)
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è)
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (RU / EN)
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ production —á–µ—Ä–µ–∑ Coolify

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

| –†–µ—à–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|---|---|
| `pnpm` –≤–º–µ—Å—Ç–æ `npm` | –ë—ã—Å—Ç—Ä–µ–µ, —ç–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ —á–µ—Ä–µ–∑ hardlinks |
| Turbopack (`--turbopack`) | ~10x –±—ã—Å—Ç—Ä–µ–µ HMR –≤ dev-—Ä–µ–∂–∏–º–µ |
| Supabase local (`supabase start`) | –ü–æ–ª–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–∫ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ |
| RLS –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–¥–∞ |
| Server Actions | –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ API-—Å–ª–æ—è, –¥–∞–Ω–Ω—ã–µ –ø—Ä—è–º–æ –≤ Server Components |
| `@supabase/ssr` v0.8.0 | –°–æ–≤–º–µ—Å—Ç–∏–º —Å supabase-js v2.97 (v0.6.1 –∏–º–µ–ª —Å–ª–æ–º–∞–Ω–Ω—ã–π –ø—É—Ç—å –∏–º–ø–æ—Ä—Ç–∞) |
